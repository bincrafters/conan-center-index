diff --git a/CMakeLists.txt b/CMakeLists.txt
index 06e83ef..953de3f 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -57,6 +57,7 @@ option(enable-lazy-lock "Enable lazy locking (only lock when multi-threaded" OFF
 option(force_lazy_lock "Forcing lazy-lock to avoid allocator/threading bootstrap issues" OFF)
 # install_prefix - installation directory prefix
 # with-xslroot=<path>  XSL stylesheet root path
+option(build-tests "Build tests" OFF)
 
 set (PACKAGE_NAME "jemalloc")
 project (${PACKAGE_NAME} C)
@@ -67,9 +68,9 @@ include(TestBigEndian)
 include (CheckCSourceCompiles)
 include (CTest)
 
-include(${CMAKE_SOURCE_DIR}/Utilities.cmake)
+include(${CMAKE_CURRENT_SOURCE_DIR}/Utilities.cmake)
 
-list(APPEND CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/build-aux")
+list(APPEND CMAKE_MODULE_PATH "${CMAKE_CURRENT_SOURCE_DIR}/build-aux")
 
 # TODO: Check the need for CONFIG
 
@@ -746,17 +747,6 @@ if(WIN32)
   # MSVC does not generate full PDB for static libs by default
   # and disable export from the DLL otherwise JEMALLOC_EXPORT becomes
   # either impport or export which is both wrong for a static library
-  set_target_properties(${LIBJEMALLOCLIB}
-           PROPERTIES
-           COMPILE_DEFINITIONS
-           "JEMALLOC_EXPORT="
-           CMAKE_COMPILE_PDB_OUTPUT_DIRECTORY_DEBUG
-           ${PROJECT_BINARY_DIR}/Debug
-           CMAKE_COMPILE_PDB_OUTPUT_DIRECTORY_RELEASE
-           ${PROJECT_BINARY_DIR}/Release
-           COMPILE_PDB_NAME 
-           ${LIBJEMALLOCLIB}
-  )
 
 endif()
 
@@ -825,6 +815,21 @@ if(C_UTIL_INTEGRATION_DEFS)
         "${C_UTIL_INTEGRATION_DEFS}")
 endif()
 
+install(FILES include/jemalloc/jemalloc${install_suffix}.h
+	DESTINATION include/jemalloc)
+if (BUILD_SHARED_LIBS)
+install(TARGETS ${LIBJEMALLOCSO}
+    RUNTIME DESTINATION bin
+    LIBRARY DESTINATION lib
+    ARCHIVE DESTINATION lib)
+else()
+	install(TARGETS ${LIBJEMALLOCLIB}
+    RUNTIME DESTINATION bin
+    LIBRARY DESTINATION lib
+    ARCHIVE DESTINATION lib)
+endif()
+
+if (build-tests)
 ##################################################################
 # Common source for Unit, Integration and stress test libraries
 set(C_TESTLIB_SRCS
@@ -1029,3 +1034,5 @@ foreach(sourcefile ${TESTS_INTEGRATION})
   add_dependencies(check ${exename})
 endforeach(sourcefile ${TESTS_UNIT})
 
+endif()
+
